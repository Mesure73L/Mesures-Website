<!--
- 
- TWELVE OF CODE
- --------------
- 
- Twelve of Code Â© 2024 by Mesure73L is licensed under CC BY-NC-SA 4.0. To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/
- Source code is available at https://github.com/Mesure73L/My-Website/tree/main.
- 
- Thank you for your understanding.
- 
-->

<h2>December 2023, Challenge 1</h2>
<p id="user-cookie">user cookie didnt load</p>
<script src="./../../../CookieManager.js"></script>
<script>
    let cman;
    // Fetching information.json
    function ajax(url) {
        return new Promise(function (resolve, reject) {
            const xhr = new XMLHttpRequest();
            xhr.onload = function () {
                resolve(this.responseText);
            };
            xhr.onerror = reject;
            xhr.open("GET", url);
            xhr.send();
        });
    }

    // Initializing the page
    ajax(`./not-an-api/challenges/information.json?n=${crypto.randomUUID()}`)
        .then(function (result) {
            cman = new CookieManager(JSON.parse(result));
            // Steps to do after information.json loads
            initializeCookies();
            createDOMYears();
            highlightChallenges();
            // initializeSettings();
            Array.from(document.getElementsByClassName("noJavaScript")).forEach(
                (element) => {
                    element.classList.add("noDisplay");
                }
            );
            document
                .getElementById("select-year")
                .classList.remove("noDisplay");
        })
        .catch(function (e) {
            // Logging any errors with initialization to the console
            console.error("There was an error during initialization.", e);
        });
    document.getElementById("user-cookie").innerText = cman.user;
</script>
